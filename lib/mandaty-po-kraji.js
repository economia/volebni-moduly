// Generated by LiveScript 1.2.0
(function(){
  var getBiggestMandateRemainderIndex, loadValues, sum;
  module.exports.compute = function(kraje, mandateCount, options){
    var values, total, mandateNumber, mandatesRaw, mandateRemainders, mandatesReceived, currentMandateCount, index, that;
    values = loadValues(kraje, options);
    total = values.reduce(sum);
    mandateNumber = Math.round(total / mandateCount);
    mandatesRaw = values.map(function(it){
      return it / mandateNumber;
    });
    mandateRemainders = mandatesRaw.map(function(it){
      return it % 1;
    });
    mandatesReceived = mandatesRaw.map(function(it){
      return Math.floor(it);
    });
    currentMandateCount = mandatesReceived.reduce(sum);
    while (currentMandateCount < mandateCount) {
      index = getBiggestMandateRemainderIndex(mandateRemainders);
      mandateRemainders[index] = 0;
      mandatesReceived[index] += 1;
      currentMandateCount += 1;
    }
    if (that = options.resultProperty) {
      kraje.forEach(function(kraj, index){
        return kraj[that] = mandatesReceived[index];
      });
      return kraje;
    } else {
      return mandatesReceived;
    }
  };
  getBiggestMandateRemainderIndex = function(mandateRemainders){
    var maxRemainder, maxIndex, i$, len$, index, mandateRemainder;
    maxRemainder = -Infinity;
    maxIndex = null;
    for (i$ = 0, len$ = mandateRemainders.length; i$ < len$; ++i$) {
      index = i$;
      mandateRemainder = mandateRemainders[i$];
      if (mandateRemainder > maxRemainder) {
        maxRemainder = mandateRemainder;
        maxIndex = index;
      }
    }
    return maxIndex;
  };
  loadValues = function(kraje, options){
    var that;
    switch (false) {
    case !(that = options.countAccessor):
      return kraje.map(function(it){
        return that(it);
      });
    default:
      return kraje;
    }
  };
  sum = function(sum, curr){
    return (sum || 0) + curr;
  };
}).call(this);
